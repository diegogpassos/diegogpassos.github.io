# Introdução e Conceitos Básicos

A Internet é o exemplo canônico de rede de computadores atualmente. Trata-se de parte integrante da sociedade moderna, dando suporte a uma série de atividades econômicas e sociais que presentes do nosso dia-a-dia. A Internet nasceu como um projeto militar do Departamento de Defesa dos Estados Unidos e sua onipresença atual era, muito provavelmente, inimaginável à época. Por todos esses motivos, ao longo dessa disciplina utilizaremos a Internet como fio condutor do nosso estudo --- mais genérico --- das redes de computadores.

## O Que É a Internet?

Essa é a pergunta mais básica da nossa disciplina e, surpreendentemente, há múltiplas possíveis respostas corretas. Isso porque é possível olhar para a Internet de diferentes perspectivas.

### Componentes

De forma bastante geral, há três tipos básicos de componentes na Internet: os *hosts* (ou _sistemas finais_), os _comutadores de pacotes_[^1] e os _enlaces de comunicação_.

[^1]: Embora estejamos fazendo aqui a distinção entre *hosts* e comutadores, em certos contextos utilizaremos o termo _nó_ para denotar ambos.

Os *hosts* são dispositivos que executam _aplicações de rede_ e utilizam a infraestrutura da Internet para se comunicar. Comumente, os *hosts* são divididos entre clientes (*e.g.*, computadores pessoais, *laptops*, *smartphones*) e servidores. Por ora, não nos aprofundaremos nessa diferenciação entre cliente e servidor: esse conceito será explorado a fundo no Capítulo 2. De toda forma, há bilhões de *hosts* conectados à Internet hoje --- a Cisco estima que eram 25 bilhões em 2015.

Os comutadores de pacotes são dispositivos de *hardware* infraestruturais da rede. Eles fornecem têm como função encaminhar --- ou comutar --- as informações enviadas por um *host* de origem até o destinatário. Essa informação, portanto, é repassada por uma sequência de comutadores até que eventualmente alcance o destino final. Comutadores são dispositivos computacionais dedicados e, muitas vezes, especializados. Além disso, nem todo comutador de pacotes é igual: nessa disciplina estudaremos tanto os _Roteadores_, quanto os _Switches_, ambos comutadores, mas com responsabilidades e funcionamentos distintos. Nos Capítulo 4 estudaremos em detalhes como funcionam os roteadores. Switches serão estudados em Redes II.

Por sua vez, os enlaces de comunicação --- ou *links*, em inglês --- interconectam dois ou mais nós da rede --- *hosts* ou comutadores. Essa interconexão ocorre através de algum tipo de _meio físico_, *e.g.*, cabos de cobre, fibra óptica, rádio. Diferente de outras redes especializadas, a Internet é bastante heterogênea em termos das tecnologias de enlace utilizadas --- o que é ao mesmo tempo uma vantagem e uma desvantagem. Cada tecnologia possui características próprias em termos, por exemplo, de desempenho e confiabilidade.

### Aplicações

As aplicações de rede são *softwares* executados nos *hosts*. Ao contrário de outros tipos de *software*, uma aplicação de rede por definição inclui algum tipo de comunicação. Em outras palavras, uma aplicação de rede é composta por "pedaços" que executam em dispositivos diferentes que precisam trocar informações uns com os outros para realizar a tarefa desejada.

Há uma série de aplicações clássicas na Internet, como o correio eletrônico e a web, mas há várias outras de grande popularidade atualmente, como o *streaming* de áudio/vídeo armazenado (*e.g.*, Youtube, Netflix, Spotify), telefonia/video-conferência, jogos multiusuário e redes sociais. Há, ainda, aplicações menos difundidas, mas que ganham popularidade a cada dia, como as de medição de consumo de energia e de automação residêncial [^2].

[^2]: De certa forma, essas aplicações são exemplos da transição da Internet clássica para o conceito recente de Internet das Coisas.

Em certa medida, a Internet existe _por causa das aplicações_. Isto é, a demanda pelas aplicações justifica a infraestrutura subjacente da Internet. Nessa perspectiva, a Internet pode ser vista como um _serviço_ que provê funcionalidades de envio e recebimento de mensagens às aplicações. Em um jargão de desenvolvimento de *software*, a Internet funcionaria como uma espécie de API (*Application Programming Interface*) para às aplicações. De fato, no Capítulo 2 estudaremos a chamada _API de Sockets_ que provê a interface para esse serviço. Também no Capítulo 2, veremos que esse serviço de comunicação da Internet é bastante flexível, oferencendo diferentes opções --- ou _modelos_ --- para aplicações com diferentes características e requisitos.

### Rede de Redes

É possível que alguma vez você tenha ouvido que "a Internet é uma rede de redes". Essa expressão denota mais uma perspectiva válida para tentarmos entender a Internet. Em sua origem, a Internet foi idealizada para permitir a comunicação entre computadores localizados em diferentes instalações da ARPA (*Advanced Research Projects Agency*) --- uma agência do Departamento de Defesa dos Estados Unidos. Essas instalações muitas vezes possuiam diversos computadores já interconectados entre si, de forma que a questão era, portanto, interconectar essas _redes locais_ em uma grande rede de longa distância (ou WAN, do inglês *Wide Area Network*).

Mesmo após décadas de evolução e sua transição de um projeto militar para uma tecnologia comercial, a Internet ainda guarda essa característica básica. Nas extremidades da Internet, encontram-se os *hosts* que comumente estão ligados à algum tipo de rede local. Pense, por exemplo, em uma empresa que possui uma rede local interconectando seus computadores ou em um usuário residencial que distribui o acesso à Internet por seus vários dispositivos domésticos.

Além disso, na Internet atual usuários finais se conectam ao resto da rede através dos chamados ISPs (*Internet Service Providers*) ou _Provedores de Acesso_. Um ISP possui sua própria infraestrutura de rede (*i.e.*, enlaces, comutadores, possivelmente servidores), constituindo, portanto, uma rede diferente --- embora interligada --- daquela de seus clientes e das dos demais ISPs. Desta forma, a Internet pode ser entendida como a interconexão dessas diversas redes, formando uma infraestrutura que permite a comunicação entre os *hosts*.

## A Estrutura da Internet

Considerando a visão da Internet como uma "Rede de Redes", uma pergunta importante é: como os vários ISPs de acesso de se interconectam? Para respondermos isso, primeiro note que existe um número bastante elevado de ISPs no mundo --- pense em quantos ISPs oferecem serviço a usuários finais na região metropolitana do Rio de Janeiro. Agora suponha que você decida abrir um negócio como provedor de acesso à Internet na sua cidade. Claramente, você precisa permitir que os dispositivos dos seus clientes se comuniquem com qualquer outro dispositivo conectado à Internet, independentemente de a qual outro ISP ele esteja conectado. Isso significa que o seu ISP deverá estabeler enlaces de comunicação com cada um dos outros ISPs do mundo?

Em uma rede das proporções da Internet --- bilhões de dispositivos, milhares de ISPs --- essa estratégia seria impensável. Utilizando um jargão mais técnico, essa abordagem tem severos problemas de _escalabilidade_. Suponha, por exemplo, que haja 50.000 ISPs no mundo. Isso significa que o seu provedor teria que estabelecer enlaces físicos com todos esses 50.000 ISPs, incluindo aqueles em outros continentes. Isso significaria um total de aproximadamente $\frac{50.000^2}{2} \approx 1,25$ bilhões de enlaces --- isso apenas para interconectar os ISPs. As ordens de grandeza desses números tornam essa abordagem inviável tanto financeira quanto tecnicamente.

O que poderia ser feito para melhorar essa escalabilidade? Uma ideia seria a utilização de um grande "ISP global" que funcionasse como um ponto central de interconexão dos demais ISPs de acesso --- por "ISP de acesso", estamos denotando aqueles se proveem conectividade aos usuários finais. Assim, cada novo ISP que se juntasse à Internet precisaria apenas estabelecer conectividade com esse único ISP central. Ademais, esse ISP poderia ter pontos de presença no mundo todo, facilitando a interconexão dos ISPs de acesso. ISPs de acesso e o ISP global firmariam algum tipo de acordo comercial, de forma análoga à maneira pela qual os usuários finais contraram seus ISPs de acesso. 

Embora em termos técnicos o uso desse ISP global seja viável, há alguns problemas. Um deles seria a dependência da Internet nessa uma entidade central. Em primeiro lugar, esse ISP seria um _ponto central de falha_, *i.e.*, se houvesse alguma falha técnica, ele poderia desconectar toda a rede. Além disso, quem controlaria esse ISP? Disputas políticas ou comerciais entre Países e empresas poderiam inviabilizar essa abordagem. Finalmente, há ainda o aspecto financeiro: se um ISP global é um negócio economicamente viável, não tardaria até que concorrentes surgissem. Nesse caso, no entanto, poderíamos ficar com "Internets separadas" para cada ISP global, o que não resolveria o problema inicial.

De fato, a maneira pela qual a Internet é organizada hoje é similar a essa ideia de múltiplos ISPs globais. Obviamente, a Internet é única e, portanto, há, de alguma forma, conectividade entre todos os *hosts*. Para isso, os vários ISPs globais estabelecem acordos comerciais e enlaces de comunicação uns com os outros --- resultando em um tipo de conectividade chamada de *peering*. Embora existam exemplos de *peerings* privados --- *i.e.*, envolvendo apenas dois ISPs ---, o mais comum é que os ISPs participem dos chamados IXPs (*Internet Exchange Points*): infraestruturas de comunicação (*i.e.*, enlaces, comutadores e outros dispositivos) compartilhadas às quais se conectam dois ou mais ISPs permitindo uma comunicação eficiente entre eles. Esse tipo de *peering* é chamado de _público_ por normalmente envolver múltiplos ISPs. O uso dos IXPs traz vantagens tanto do ponto de vista econômico (*e.g.*, um ISP pode se conectar a vários outros estabelecendo apenas um enlace para o IXP) quanto do técnico (*e.g.*, mais tolerante a falhas do que um único enlace).

Além dos ISPs globais e dos de acesso, há ainda outros de âmbito regional. Trata-se de ISPs que provêm conectividade aos ISPs de acesso, mas que não possuem uma abrangência mundial, como os ISPs globais. Hoje são comuns, ainda, as _Redes de Provedores de Conteúdo_, *i.e.*, redes de escala global --- como as dos ISPs globais ---, mas voltadas especificamente para servir conteúdo aos usuários finais. Exemplos incluem redes mantidas por grandes empresas como a Google e a Microsoft que se beneficiam de uma rede própria interligada de forma direta a vários ISPs pelo mundo para fazer com que seus conteúdos cheguem de forma mais eficiente aos seus usuários.

Em suma, a estrutura de conectividade da Internet segue _aproximadamente_ um hierarquia: no topo, estão os ISP globais --- comumente chamados de _Tier 1_ --- e as redes de provedores de conteúdo; um nível abaixo, há os ISPs regionais; nas folhas dessa hierarquia, encontram-se os ISPs de acesso, que efetivamente conectam os usuários finais. Quando dois ISPs/redes de provedores de conteúdo se conectam, isso pode ser feito tanto por enlaces diretos, quanto por IXPs.

É importante notar, no entanto, que essa hierarquia é apenas uma aproximação para facilitar a compreensão da estrutura da Internet. Não há uma definição rígida dessa estrutura e na prática a hierarquia é quebrada frequentemente. Por exemplo, ISPs de acesso podem, eventualmente, se conectar diretamente a ISPs globais. Eles podem também se conectar diretamente com outros ISPs de acesso da mesma região com o objetivo de reduzir os custos de comunicação entre eles. ISPs reginais comumente se comunicam entre si. Além disso, a própria definição de ISP *Tier 1*, regional ou de acesso é abstrata e está aberta a interpretações[^DefTier1].

[^DefTier1]: Por exemplo, até esse ponto, utilizamos uma noção intuitiva de abrangência de atuação para definir o que seria um ISP *Tier 1*. Embora essa definição seja comum, certos autores entendem que um IPS *Tier 1* precisa atender a outras características, como possuir *peering* com todos os demais ISPs *Tier 1* e não pagar pelo tráfego enviado através deles.

Para encerrar a discussão sobre a estrutura da Internet, é importante definirmos mais dois termos: _Ponto de Presença_ e _Backbone_. Um ponto de presença --- ou PoP, do inglês *Point-of-Presence* --- é uma porção de uma rede (comutadores, enlaces e outros dispositivos) dedicada à interconectá-la a outras redes. Por exemplo, se um ISP $A$ realiza *peering* com outros ISPs através de um IXP, então $A$ possui um PoP do qual parte o enlace físico que o interconecta ao IXP. Em geral, esse PoP de $A$ estará em uma instalação física geograficamente próxima do infraestrutura do IXP. PoPs também são usados por ISPs como pontos de interconexão com seus clientes de uma determinada região geográfica. Assim, ISPs tipicamente possuem vários PoPs espalhados por toda a sua região de atuação.

PoPs, portanto, se localizam nas extremidades da rede de um ISP. Por outro lado, a porção mais central da rede de um ISP dedicada à interconectar seus vários PoPs é normalmente denominada de *backbone*. O *backbone* de uma rede geralmente abriga os enlaces mais longos e de maior capacidade --- já que todo o tráfego entre PoPs converge para o *backbone*.

## Protocolos

Um conceito absolutamente central do estudo das redes de computadores é o de _protocolo_. Nesse contexto, um protocolo define o formato e a ordem em que as mensagens são trocadas pelos participantes na comunicação, bem como as ações que devem ser tomadas como consequência da recepção ou transmissão delas. Protocolos podem definir, ainda, uma série de convenções sobre como as informações em uma mensagem devem ser interpretadas ou representadas.

Para que esse conceito fique mais claro, é possível fazermos um paralelo entre os protocolos de rede e aqueles usados na comunicação entre humanos. Considere, por exemplo, uma ligação telefônica. Geralmente, a primeira palavra dita ao atender um telefonema é "alô". Isso é uma **convenção** social utilizada para sinalizar a quem quer que esteja do outro lado da ligação que o telefone foi atendido. Essa pessoa do outro lado da chamada, por sua vez, ao receber o "alô" pode prosseguir com o resto da chamada --- por exemplo, se identificando.

Da mesma forma que usamos e esperamos que os outros usem esse protocolo ao fazermos/recebermos uma ligação, computadores conectados via rede seguem e esperam que os demais também sigam protocolos de comunicação específicos. No caso dos dispositivos computacionais, no entanto, os protocolos devem ser seguidos a risca: quaisquer desvios nos formatos ou ordem esperada das mensagens farão com que a comunicação falhe. Isso ocorre porque o comportamento dos dispositivos computacionais é programado. Por outro lado, em protocolos sociais utilizados para a comunicação entre humanos há margem para pequenas discrepâncias, porque somos flexíveis o suficiente para nos adaptar a essas diferenças. Muitas vezes, diferenças culturais resultam em pequenas diferenças nos protocolos de comunicação utilizados. Entretanto, ainda somos geralmente capazes de nos comunicar mesmo assim.


Assim há várias culturas diferentes entre humanos, plataformas computacionais podem diferir tanto em termos de *hardware* como em termos de *software*. Como os dispositivos computacionais não possuem a mesma capacidade de adaptação que nós humanos, protocolos de rede bem definidos são essenciais para garantir a interoperabilidade entre eles.

Em grande parte, esse curso se dedica ao estudo dos principais protocolos utilizados na Internet. 

## Enlaces de Comunicação

Em uma rede de computadores, enlaces, ou *links*, interconectam **dois ou mais** dispositivos[^PontoAPontoVsCompartilhado]. Enlaces possuem algum tipo de meio físico através do qual as mensagens se propagam desde o dispositivo transmissor até o(s) dispositivo(s) receptor(es). Há uma grande variedade de meios físicos utilizados em enlaces de comunicação práticos, incluindo meios elétricos (*e.g.*, fios de cobre), meios ópticos (*e.g.*, fibras ópticas), meios sem fio (*e.g.*, rádio).

De forma geral, transmite-se informação por um enlace manipulando-se alguma *característica mensurável do meio físico*; de forma análoga, a recepção dá-se através da observação dessa mesma característica. Por exemplo, se há um par de fios de cobre conectando o transmissor e o receptor, o primeiro pode manipular a tensão elétrica entre os fios, enquanto o segundo pode medi-la. Nesse caso, podemos mapear valores diferentes de informação (*e.g.*, valores de bits) a valores diferentes de tensão elétrica. Mais genericamente, o transmissor gera um _sinal_ elétrico para codificar alguma informação.

Cada tipo de meio de transmissão tem características peculiares que afetam diretamente seu desempenho. Por exemplo, os meios sem fio são, em geral, bastante susceptíveis a falhas na transmissão/recepção de mensagens, enquanto a probabilidade de uma falha dessa natureza em uma fibra óptica é bastante reduzida.

[^PontoAPontoVsCompartilhado]: Em boa parte do nosso estudo sobre as redes de computadores, veremos apenas exemplos de enlaces *ponto-a-ponto* que conectam exatamente dois dispositivos. No entanto, são comuns os chamados *enlaces compartilhados* que podem interconectar vários --- *i.e.*, mais de dois --- dispositivos através de um mesmo meio físico. Por ora, não nos preocuparemos com essa distinção.

Além do tipo do meio físico, enlaces variam também em termos de taxa de transmissão, *i.e.*, o quão rapidamente um transmissor *insere*[^Inserir] a mensagem no meio físico. Um enlace de comunicação Wi-Fi, por exemplo, pode operar a diversas taxas (*e.g.*, 6 Mb/s, 200 Mb/s). Taxas de transmissão são normalmente medidas em bits por segundo --- ou algum múltiplo disso ---, denotando, portanto, o quão rapidamente o transmissor *insere* cada bit no meio físico. Assim, o tempo total para a transmissão de uma mensagem depende tanto da taxa de transmissão, quanto do tamanho da mensagem. A taxa de transmissão é também comumente chamada de _capacidade do enlace_, _banda_ e _largura de banda_, embora esses dois últimos termos não sejam tecnicamente equivalentes.

[^Inserir]: O termo *inserir* está sendo usado aqui para denotar o ato do transmissor manipular o meio físico para transmitir informação. No exemplo de um enlace baseado em um par de fios de cobre em que o transmissor manipula a tensão elétrica, o *inserir* denota o ato do transmissor alterar a tensão entre os fios para representar a próxima parte (*e.g.*, bit) da mensagem.

Outro fator é o comprimento do meio físico (ou a distância entre transmissor e receptor). Tudo mais constante, quanto maior essa distância, mais tempo leva a mensagem para sair do transmissor e chegar ao receptor. Esse tempo é chamado de _tempo de propagação_ e depende **apenas do comprimento do meio/distância e da velocidade de propagação do sinal no meio em questão**. Note que tipos de sinais diferentes se propagam a velocidades diferentes. Por exemplo, um sinal sonoro se propaga a aproximadamente 340 m/s no ar, enquanto a luz se propaga a pouco menos de 300.000 m/s. A velocidade de propagação também depende do tipo do meio: por exemplo, um sinal sonoro se propaga mais rapidamente em meios sólidos.

Outra forma de classificar enlaces de comunicação é analisar se o mesmo se baseia em um _meio guiado_ ou em um _meio não-guiado_. Em meios guiados, o sinal se propaga ao longo de um caminho bem definido por um certo material --- por exemplo, ao longo de um fio de cobre. Já em meios não guiados, o sinal não percorre um caminho fixo, tendendo a se espalhar pelo espaço (*e.g.*, um enlace sem fio).
